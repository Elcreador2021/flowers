<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Ramo 3D de Tulipanes Amarillos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    html, body {height:100%;margin:0;padding:0;}
    body {background:#fbf7dd;}
    #canvas3d {display:block; width:100vw; height:90vh;}
    .mensaje {text-align: center; font-size: 1.5em; color: #b78900; font-weight: bold; margin:1em 0;}
  </style>
</head>
<body>
  <div class="mensaje">Para mis mejores amigas Fabiola y Bel√©n üå∑‚ú®</div>
  <canvas id="canvas3d"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/three@0.156.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.156.1/examples/js/controls/OrbitControls.js"></script>
  <script>
    // Referencia canvas y su tama√±o
    const canvas = document.getElementById("canvas3d");
    const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
    function resize(){
      const w = window.innerWidth, h = window.innerHeight*0.9;
      renderer.setSize(w, h, false);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    }
    window.addEventListener("resize", resize);

    // Escena, c√°mara y controles
    const scene = new THREE.Scene();
    scene.background = null;
    const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
    camera.position.set(0,2,8);
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping=true;
    controls.target.set(0,2,0);
    controls.enablePan=false;

    // Luces
    scene.add(new THREE.AmbientLight(0xffffc0,1.3));
    const dir = new THREE.DirectionalLight(0xffffc0, 1.2);
    dir.position.set(-2,6,4);
    scene.add(dir);

    // Funci√≥n para crear tulip√°n b√°sico
    function tulipan(x, z, color) {
      // tallo
      let tallo = new THREE.Mesh(
        new THREE.CylinderGeometry(0.1,0.13,2,10),
        new THREE.MeshLambertMaterial({color:0x347a28})
      );
      tallo.position.set(x,1,z);

      // p√©talos (3)
      let petalmat = new THREE.MeshLambertMaterial({color, emissive: color, emissiveIntensity:0.25, side:THREE.DoubleSide});
      let p√©talo = new THREE.ConeGeometry(0.27, 0.6, 12, 1, true);
      let qpetalos = new THREE.Group();
      for(let ang of [0,120,240]) {
        let mesh = new THREE.Mesh(p√©talo, petalmat);
        mesh.position.y = 2; mesh.rotation.y = THREE.MathUtils.degToRad(ang);
        mesh.rotation.x = -0.18;
        qpetalos.add(mesh);
      }
      qpetalos.position.set(x,0,z);

      // centro
      let centro = new THREE.Mesh(
        new THREE.SphereGeometry(0.18,16,10),
        new THREE.MeshLambertMaterial({color:0xfffca0})
      ); centro.position.set(0,2.37,0);

      // hoja
      let hoja = new THREE.Mesh(
        new THREE.CylinderGeometry(0,0.12,0.95,12,1),
        new THREE.MeshLambertMaterial({color:0xa2ea3f}));
      hoja.position.set(x+0.19,0.53,z);
      hoja.rotation.z=-1.1;hoja.rotation.x=0.68;

      let grupo = new THREE.Group();
      grupo.add(tallo);
      grupo.add(qpetalos);
      grupo.add(centro);
      grupo.add(hoja);

      return grupo;
    }
    // Genera el ramo (7 tulipanes)
    const colores = [0xfff000, 0xffea72, 0xffea00, 0xffff66, 0xffdf37, 0xf9da27, 0xffe153];
    for(let i=0;i<7;i++){
      let ang = (i/7)*Math.PI*2, r = 0.75+0.2*Math.sin(i*2.2);
      scene.add(tulipan(Math.cos(ang)*r, Math.sin(ang)*r, colores[i%colores.length]));
    }
    // Vaso/base
    let vaso = new THREE.Mesh(
      new THREE.CylinderGeometry(0.67,0.54,1,24),
      new THREE.MeshPhysicalMaterial({color:0xeedfc6,metalness:0.2,roughness:0.32,transparent:true, opacity:0.73}));
    vaso.position.y=0.53;
    scene.add(vaso);

    function animar(t) {
      controls.update();
      scene.traverse(obj=>{
        if(obj.isMesh && obj.geometry.type=="ConeGeometry"){
          obj.position.y=2.02+Math.sin(t/740+obj.id)*0.05;
        }
      });
      renderer.render(scene,camera);
      requestAnimationFrame(animar);
    }
    resize();
    animar(0);
  </script>
</body>
</html>
